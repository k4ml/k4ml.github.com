<!DOCTYPE html>
<html lang="en">
<head>
        <title>Sandbox</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
        
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

        <header id="banner" class="body">
                <h1><a href=".">A Pelican Blog </a></h1>
                <nav><ul>
                
                
                
                
                
                    <li ><a href="./category/testcategory.html">TestCategory</a></li>
                
                    <li ><a href="./category/testpages.html">TestPages</a></li>
                
                    <li ><a href="./category/yeah.html">Yeah</a></li>
                
                    <li ><a href="./category/content.html">content</a></li>
                
                    <li class="active"><a href="./category/docs.html">docs</a></li>
                
                    <li ><a href="./category/emacs.html">emacs</a></li>
                
                    <li ><a href="./category/pelican.html">pelican</a></li>
                
                    <li ><a href="./category/source.html">source</a></li>
                
                    <li ><a href="./category/src.html">src</a></li>
                
                    <li ><a href="./category/test.html">test</a></li>
                
                    <li ><a href="./category/yeah.html">yeah</a></li>
                
                </ul></nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="sandbox.html" rel="bookmark"
           title="Permalink to Sandbox">Sandbox</a></h1>
      
    </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2012-09-30T04:52:53.529306">
                Sun 30 September 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href="./author/kamal.html">kamal</a>
        </address>
        
<p>In <a href="./category/docs.html">docs</a>. </p>



</footer><!-- /.post-info -->
      <p>The Jinja2 sandbox can be used to evaluate untrusted code.  Access to unsafe
attributes and methods is prohibited.</p>
<p>Assuming <cite>env</cite> is a <a href="#id1"><span class="problematic" id="id2">:class:`SandboxedEnvironment`</span></a> in the default configuration
the following piece of code shows how it works:</p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 7); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<pre class="doctest-block">
&gt;&gt;&gt; env.from_string(&quot;{{ func.func_code }}&quot;).render(func=lambda:None)
u''
&gt;&gt;&gt; env.from_string(&quot;{{ func.func_code.do_something }}&quot;).render(func=lambda:None)
Traceback (most recent call last):
  ...
SecurityError: access to attribute 'func_code' of 'function' object is unsafe.
</pre>
<div class="section" id="api">
<h2>API</h2>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 20)</p>
<p>Unknown directive type &quot;module&quot;.</p>
<pre class="literal-block">
.. module:: jinja2.sandbox

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 22)</p>
<p>Unknown directive type &quot;autoclass&quot;.</p>
<pre class="literal-block">
.. autoclass:: SandboxedEnvironment([options])
    :members: is_safe_attribute, is_safe_callable, default_binop_table,
              default_unop_table, intercepted_binops, intercepted_unops,
              call_binop, call_unop

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 27)</p>
<p>Unknown directive type &quot;autoclass&quot;.</p>
<pre class="literal-block">
.. autoclass:: ImmutableSandboxedEnvironment([options])

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 29)</p>
<p>Unknown directive type &quot;autoexception&quot;.</p>
<pre class="literal-block">
.. autoexception:: SecurityError

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 31)</p>
<p>Unknown directive type &quot;autofunction&quot;.</p>
<pre class="literal-block">
.. autofunction:: unsafe

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 33)</p>
<p>Unknown directive type &quot;autofunction&quot;.</p>
<pre class="literal-block">
.. autofunction:: is_internal_attribute

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 35)</p>
<p>Unknown directive type &quot;autofunction&quot;.</p>
<pre class="literal-block">
.. autofunction:: modifies_known_mutable

</pre>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>The Jinja2 sandbox alone is no solution for perfect security.  Especially
for web applications you have to keep in mind that users may create
templates with arbitrary HTML in so it's crucial to ensure that (if you
are running multiple users on the same server) they can't harm each other
via JavaScript insertions and much more.</p>
<p>Also the sandbox is only as good as the configuration.  We stronly
recommend only passing non-shared resources to the template and use
some sort of whitelisting for attributes.</p>
<p class="last">Also keep in mind that templates may raise runtime or compile time errors,
so make sure to catch them.</p>
</div>
</div>
<div class="section" id="operator-intercepting">
<h2>Operator Intercepting</h2>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 55)</p>
<p>Unknown directive type &quot;versionadded&quot;.</p>
<pre class="literal-block">
.. versionadded:: 2.6

</pre>
</div>
<p>For maximum performace Jinja2 will let operators call directly the type
specific callback methods.  This means that it's not possible to have this
intercepted by overriding <a href="#id3"><span class="problematic" id="id4">:meth:`Environment.call`</span></a>.  Furthermore a
conversion from operator to special method is not always directly possible
due to how operators work.  For instance for divisions more than one
special method exist.</p>
<div class="system-message" id="id3">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 57); <em><a href="#id4">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>With Jinja 2.6 there is now support for explicit operator intercepting.
This can be used to customize specific operators as necessary.  In order
to intercept an operator one has to override the
<a href="#id5"><span class="problematic" id="id6">:attr:`SandboxedEnvironment.intercepted_binops`</span></a> attribute.  Once the
operator that needs to be intercepted is added to that set Jinja2 will
generate bytecode that calls the <a href="#id7"><span class="problematic" id="id8">:meth:`SandboxedEnvironment.call_binop`</span></a>
function.  For unary operators the <cite>unary</cite> attributes and methods have to
be used instead.</p>
<div class="system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 64); <em><a href="#id6">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id7">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 64); <em><a href="#id8">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>The default implementation of <a href="#id9"><span class="problematic" id="id10">:attr:`SandboxedEnvironment.call_binop`</span></a>
will use the <a href="#id11"><span class="problematic" id="id12">:attr:`SandboxedEnvironment.binop_table`</span></a> to translate
operator symbols into callbacks performing the default operator behavior.</p>
<div class="system-message" id="id9">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 73); <em><a href="#id10">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id11">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./~/.pip/build/jinja2/docs/sandbox.rst</tt>, line 73); <em><a href="#id12">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p>This example shows how the power (<tt class="docutils literal">**</tt>) operator can be disabled in
Jinja2:</p>
<pre class="literal-block">
from jinja2.sandbox import SandboxedEnvironment


class MyEnvironment(SandboxedEnvironment):
    intercepted_binops = frozenset(['**'])

    def call_binop(self, context, operator, left, right):
        if operator == '**':
            return self.undefined('the power operator is unavailable')
        return SandboxedEnvironment.call_binop(self, context,
                                               operator, left, right)
</pre>
<p>Make sure to always call into the super method, even if you are not
intercepting the call.  Jinja2 might internally call the method to
evaluate expressions.</p>
</div>

    </div><!-- /.entry-content -->
    

  </article>
</section>

        <section id="extras" class="body">
        
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->




</body>
</html>